@using EmployeeOrders.Web.Models.ViewModels

@model IEnumerable<UserOrders>

<div class="container" style="margin-top:60px;margin-bottom:60px; ">
	<div class="card border">
		<div class="card-header">
			<h2><strong>User orders</strong></h2>
			<div class="right">
				<p>
					Show
					<a asp-action="Orders" asp-route-sort=true>
						Today's
					</a> or
					<a asp-action="Orders" asp-route-sort=false>
						All
					</a>
				</p>
			</div>
		</div>
		<div class="accordion" id="view">
			<div class="card">
				<div class="card-header" id="headingOne">
					<h2 class="mb-0">
						<button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
							Full list of orders
						</button>
					</h2>
				</div>
			</div>
			<div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#view">
				<div class="card-body">
					<table class="table table-bordered table-striped">
						<tr>
							<th>User Name</th>
							<th>Drink</th>
							<th>Food</th>
							<th>Total Price</th>
							<th>Date</th>
						</tr>
						@foreach (var item in @Model)
						{
							<tr>
								<th>@item.User.Name</th>
								<th>@item.Order.Drink.Name</th>
								<th>@item.Order.Food.Name</th>
								<th>@item.Order.Total.ToString("0.##") yan</th>
								<th>@item.Date</th>
							</tr>
						}
					</table>
					<p>Total price: <strong>@ViewBag.totalPrice.ToString("0.##") yan</strong></p>
				</div>
			</div>
		</div>
		<div class="card">
			<div class="card-header" id="headingTwo">
				<h2 class="mb-0">
					<button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
						Short list of orders
					</button>
				</h2>
			</div>
			<div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#view">
				<div class="card-body">
					<div class="row">
						<div class="col sm-4">
							<table class="table table-bordered table-striped">
								<tr>
									<th>Food</th>
									<th>Count</th>
								</tr>

								@foreach (var item in @ViewBag.totalFood)
								{
									<tr>
										<th>@item.Name</th>
										<th>@item.Count</th>
									</tr>
								}
							</table>
						</div>
						<div class="col sm-4">
							<table class="table table-bordered table-striped">
								<tr>
									<th>Drink</th>
									<th>Count</th>
								</tr>

								@foreach (var item in @ViewBag.totalDrinks)
								{
									<tr>
										<th>@item.Name</th>
										<th>@item.Count</th>
									</tr>
								}
							</table>
						</div>
					</div>
					<p>Total price: <strong>@ViewBag.totalPrice.ToString("0.##") yan</strong></p>
				</div>
			</div>
		</div>
	</div>
</div>

